# pgebus

[English](README.md) | **简体中文**

基于 PostgreSQL 的事件总线系统 - 轻量级且可靠的事件处理框架

## 功能特性

- ✅ **PostgreSQL 作为唯一数据源** - 数据库作为唯一的队列，确保数据一致性
- ✅ **NOTIFY/LISTEN 实时通知** - 利用 PostgreSQL 的原生功能进行事件推送
- ✅ **并发安全** - 确保事件不会被重复处理
- ✅ **延迟执行** - 支持定时任务和延迟事件处理
- ✅ **自动重试** - 内置重试机制，自动处理失败
- ✅ **分层事件分发** - 支持事件类型的前缀匹配和分层分发
- ✅ **完整类型标注** - 内置完整类型注解（PEP 561）

## 安装

待补充

## pgebus 不是什么

pgebus 并不打算替代以下工具：

- RabbitMQ
- Redis Streams
- Kafka
- NATS
- 云原生消息代理

具体来说，它不适用于以下场景：

- 高吞吐量的事件流处理
- 大规模的发布/订阅工作负载
- 跨数据中心或互联网级别的消息传递
- 大型负载的消息传递

如果你需要高吞吐量、大规模发布/订阅或解耦的消费者，请使用专业的消息代理。

## 为什么使用 pgebus

以下情况可能适合使用 pgebus：

- 你的应用主要是本地或单体架构
- 你可以控制 PostgreSQL 实例
- 你有长时间运行或高成本的外部任务
- 丢失或重复事件会带来实际成本
- 你已经依赖 PostgreSQL 来保证数据正确性

## 为什么不使用 pgebus

以下情况可能不适合使用 pgebus：

- 你的系统是微服务架构
- 你需要跨区域的水平扩展
- 你需要处理突发流量或大规模发布/订阅
- 你将事件视为尽力而为的信号

## API 参考

## 依赖

- Python 3.8+
- SQLAlchemy 2.0+（支持 asyncio）
- asyncpg
- PostgreSQL 9.5+

## 许可证

MIT

## 贡献

欢迎贡献！请提交 Pull Request 或创建 Issue。
